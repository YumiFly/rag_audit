# ğŸ” æ™ºèƒ½åˆçº¦å®‰å…¨åˆ†æå¹³å°

ä¸€ä¸ªåŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ¶æ„çš„å…¨æ ˆæ™ºèƒ½åˆçº¦å®‰å…¨åˆ†æå¹³å°ï¼Œé›†æˆå¤šç§å®‰å…¨åˆ†æå·¥å…·ï¼Œæä¾›ç°ä»£åŒ–Webç•Œé¢å’Œæ™ºèƒ½é—®ç­”åŠŸèƒ½ã€‚

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Node.js 18+](https://img.shields.io/badge/node.js-18+-green.svg)](https://nodejs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-00a393.svg)](https://fastapi.tiangolo.com/)
[![Next.js](https://img.shields.io/badge/Next.js-14+-black.svg)](https://nextjs.org/)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” æ™ºèƒ½åˆçº¦åˆ†æ
- **å¤šå·¥å…·é›†æˆ**: æ”¯æŒSlitherã€Mythrilã€Echidnaç­‰ä¸»æµå®‰å…¨åˆ†æå·¥å…·
- **å®æ—¶åˆ†æ**: ä¸Šä¼ åˆçº¦ä»£ç å³å¯è·å¾—è¯¦ç»†çš„å®‰å…¨åˆ†ææŠ¥å‘Š
- **æ¼æ´æ£€æµ‹**: è‡ªåŠ¨è¯†åˆ«å¸¸è§çš„æ™ºèƒ½åˆçº¦å®‰å…¨æ¼æ´
- **é£é™©è¯„ä¼°**: æä¾›è¯¦ç»†çš„é£é™©ç­‰çº§å’Œä¿®å¤å»ºè®®

### ğŸ¤– AIæ™ºèƒ½é—®ç­”
- **RAGæ¶æ„**: åŸºäºå‘é‡æ£€ç´¢çš„æ™ºèƒ½åˆçº¦å®‰å…¨é—®é¢˜è§£ç­”
- **ä¸Šä¸‹æ–‡ç†è§£**: æ”¯æŒå¤šè½®å¯¹è¯ï¼Œç†è§£å¤æ‚çš„æŠ€æœ¯é—®é¢˜
- **ä¸“ä¸šè§£ç­”**: é’ˆå¯¹æ™ºèƒ½åˆçº¦å®‰å…¨é—®é¢˜æä¾›ä¸“ä¸šå»ºè®®
- **å®æ—¶å“åº”**: å¿«é€Ÿè·å¾—å‡†ç¡®çš„æŠ€æœ¯æ”¯æŒ

### ğŸ“Š æ‰¹é‡æŠ¥å‘Šç®¡ç†
- **æ‰¹é‡ä¸Šä¼ **: æ”¯æŒå¤šä¸ªæŠ¥å‘Šæ–‡ä»¶åŒæ—¶ä¸Šä¼ å’Œå¤„ç†
- **æ™ºèƒ½è§£æ**: è‡ªåŠ¨è§£æä¸åŒæ ¼å¼çš„å®‰å…¨åˆ†ææŠ¥å‘Š
- **ç»Ÿè®¡åˆ†æ**: æä¾›è¯¦ç»†çš„ç»Ÿè®¡æ•°æ®å’Œè¶‹åŠ¿åˆ†æ
- **æŠ¥å‘Šé¢„è§ˆ**: æ”¯æŒJSONã€æ–‡æœ¬ç­‰å¤šç§æ ¼å¼çš„æŠ¥å‘Šé¢„è§ˆ

### ğŸŒ ç°ä»£åŒ–Webç•Œé¢
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡çš„å®Œç¾ä½“éªŒ
- **æš—è‰²ä¸»é¢˜**: ç°ä»£åŒ–çš„æš—è‰²ä¸»é¢˜ç•Œé¢è®¾è®¡
- **å®æ—¶æ›´æ–°**: åˆ†æè¿›åº¦å’Œç»“æœçš„å®æ—¶æ˜¾ç¤º
- **äº¤äº’å¼å›¾è¡¨**: ç›´è§‚çš„æ•°æ®å¯è§†åŒ–å’Œç»Ÿè®¡å›¾è¡¨

## ğŸ“Š ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```mermaid
graph TB
    %% ç”¨æˆ·äº¤äº’å±‚
    subgraph "ç”¨æˆ·äº¤äº’å±‚"
        UI[Webç•Œé¢/APIå®¢æˆ·ç«¯]
        CLI[å‘½ä»¤è¡Œå·¥å…·]
    end
    
   %% APIç½‘å…³å±‚
    subgraph "APIæœåŠ¡å±‚"
        API["FastAPIæœåŠ¡å™¨\nrag_audit_api.py"]
        HEALTH["/health\nå¥åº·æ£€æŸ¥"]
        ANALYZE["/analyze\nåˆçº¦åˆ†æ"]
        INGEST["/ingest\næ‰¹é‡ä¸Šä¼ "]
        ASK["/ask\næ™ºèƒ½é—®ç­”"]

        API --> HEALTH
        API --> ANALYZE
        API --> INGEST
        API --> ASK
    end
    
    %% æ ¸å¿ƒå¤„ç†å±‚
    subgraph "æ™ºèƒ½åˆçº¦åˆ†æå¼•æ“"
        SLITHER[Slitheré™æ€åˆ†æ<br/>å®‰å…¨æ¼æ´æ£€æµ‹]
        ECHIDNA[Echidnaæ¨¡ç³Šæµ‹è¯•<br/>å±æ€§éªŒè¯]
        PARSER[æŠ¥å‘Šè§£æå™¨<br/>flatten_slither/echidna]
    end
    
    %% AIå¤„ç†å±‚
    subgraph "AIæ™ºèƒ½å¤„ç†å±‚"
        GEMINI[Google Gemini AI]
        EMBED[æ–‡æœ¬å‘é‡åŒ–<br/>embedding-001]
        GEN[æ–‡æœ¬ç”Ÿæˆ<br/>gemini-pro]
    end
    
    %% æ•°æ®å­˜å‚¨å±‚
    subgraph "æ•°æ®å­˜å‚¨å±‚"
        SUPABASE[(Supabaseæ•°æ®åº“)]
        VECTORS[(audit_vectorsè¡¨\nå‘é‡å­˜å‚¨)]
        SEARCH["å‘é‡ç›¸ä¼¼åº¦æœç´¢\nmatch_documents()"]
    end
    
    %% å¤–éƒ¨æœåŠ¡
    subgraph "å¤–éƒ¨æœåŠ¡"
        ETHERSCAN[Etherscan API<br/>åˆçº¦æºç è·å–]
        GITHUB[GitHub<br/>ä»£ç ä»“åº“]
    end
    
    %% æ•°æ®æµè¿æ¥
    UI --> API
    CLI --> API
    
    API --> HEALTH
    API --> ANALYZE
    API --> INGEST
    API --> ASK
    
    %% åˆ†ææµç¨‹
    ANALYZE --> SLITHER
    ANALYZE --> ECHIDNA
    ANALYZE --> ETHERSCAN
    
    SLITHER --> PARSER
    ECHIDNA --> PARSER
    
    %% æ•°æ®å¤„ç†æµç¨‹
    PARSER --> EMBED
    INGEST --> EMBED
    EMBED --> GEMINI
    EMBED --> VECTORS
    
    %% é—®ç­”æµç¨‹
    ASK --> EMBED
    ASK --> SEARCH
    SEARCH --> VECTORS
    VECTORS --> GEN
    GEN --> GEMINI
    
    %% å­˜å‚¨è¿æ¥
    VECTORS --> SUPABASE
    SEARCH --> SUPABASE
    
    %% æ ·å¼å®šä¹‰
    classDef userLayer fill:#e1f5fe
    classDef apiLayer fill:#f3e5f5
    classDef analysisLayer fill:#fff3e0
    classDef aiLayer fill:#e8f5e8
    classDef dataLayer fill:#fce4ec
    classDef externalLayer fill:#f1f8e9
    
    class UI,CLI userLayer
    class API,HEALTH,ANALYZE,INGEST,ASK apiLayer
    class SLITHER,ECHIDNA,PARSER analysisLayer
    class GEMINI,EMBED,GEN aiLayer
    class SUPABASE,VECTORS,SEARCH dataLayer
    class ETHERSCAN,GITHUB externalLayer
```

## ğŸ”„ æ•°æ®æµç¨‹

### RAGé—®ç­”æµç¨‹æ—¶åºå›¾

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant API as FastAPIæœåŠ¡
    participant Slither as Slitheråˆ†æå™¨
    participant Echidna as Echidnaæµ‹è¯•å™¨
    participant Gemini as Google Gemini AI
    participant DB as Supabaseæ•°æ®åº“
    participant Vector as å‘é‡å­˜å‚¨

    %% åˆçº¦åˆ†ææµç¨‹
    Note over User,Vector: æ™ºèƒ½åˆçº¦åˆ†ææµç¨‹
    User->>API: POST /analyze (ä¸Šä¼ .solæ–‡ä»¶)
    API->>Slither: æ‰§è¡Œé™æ€åˆ†æ
    Slither-->>API: è¿”å›å®‰å…¨æ¼æ´æŠ¥å‘Š
    API->>Echidna: æ‰§è¡Œæ¨¡ç³Šæµ‹è¯•
    Echidna-->>API: è¿”å›å±æ€§æµ‹è¯•ç»“æœ
    API->>Gemini: è°ƒç”¨embedding-001ç”Ÿæˆå‘é‡
    Gemini-->>API: è¿”å›768ç»´å‘é‡
    API->>Vector: å­˜å‚¨åˆ†æç»“æœå’Œå‘é‡
    Vector->>DB: ä¿å­˜åˆ°audit_vectorsè¡¨
    API-->>User: è¿”å›åˆ†æç»“æœæ‘˜è¦

    %% æ™ºèƒ½é—®ç­”æµç¨‹
    Note over User,Vector: RAGæ™ºèƒ½é—®ç­”æµç¨‹
    User->>API: POST /ask (æé—®)
    API->>Gemini: å°†é—®é¢˜è½¬æ¢ä¸ºå‘é‡
    Gemini-->>API: è¿”å›é—®é¢˜å‘é‡
    API->>Vector: æ‰§è¡Œå‘é‡ç›¸ä¼¼åº¦æœç´¢
    Vector->>DB: è°ƒç”¨match_documents()å‡½æ•°
    DB-->>Vector: è¿”å›ç›¸å…³æ–‡æ¡£
    Vector-->>API: è¿”å›top_kç›¸å…³å†…å®¹
    API->>Gemini: åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”
    Gemini-->>API: è¿”å›AIç”Ÿæˆçš„å›ç­”
    API-->>User: è¿”å›æ™ºèƒ½é—®ç­”ç»“æœ
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆæ¶æ„

### æŠ€æœ¯ç»„ä»¶è¯¦ç»†æ¶æ„

```mermaid
graph TB
    %% ç”¨æˆ·äº¤äº’å±‚
    subgraph "ç”¨æˆ·äº¤äº’å±‚"
        UI[Webç•Œé¢/APIå®¢æˆ·ç«¯]
        CLI[å‘½ä»¤è¡Œå·¥å…·]
    end
    
    %% APIç½‘å…³å±‚
    subgraph "APIæœåŠ¡å±‚"
        API["FastAPIæœåŠ¡å™¨\nrag_audit_api.py"]
        HEALTH["/health\nå¥åº·æ£€æŸ¥"]
        ANALYZE["/analyze\nåˆçº¦åˆ†æ"]
        INGEST["/ingest\næ‰¹é‡ä¸Šä¼ "]
        ASK["/ask\næ™ºèƒ½é—®ç­”"]
    end
    
    %% æ ¸å¿ƒå¤„ç†å±‚
    subgraph "æ™ºèƒ½åˆçº¦åˆ†æå¼•æ“"
        SLITHER[Slitheré™æ€åˆ†æ<br/>å®‰å…¨æ¼æ´æ£€æµ‹]
        ECHIDNA[Echidnaæ¨¡ç³Šæµ‹è¯•<br/>å±æ€§éªŒè¯]
        PARSER[æŠ¥å‘Šè§£æå™¨<br/>flatten_slither/echidna]
    end
    
    %% AIå¤„ç†å±‚
    subgraph "AIæ™ºèƒ½å¤„ç†å±‚"
        GEMINI[Google Gemini AI]
        EMBED[æ–‡æœ¬å‘é‡åŒ–<br/>embedding-001]
        GEN[æ–‡æœ¬ç”Ÿæˆ<br/>gemini-pro]
    end
    
    %% æ•°æ®å­˜å‚¨å±‚
    subgraph "æ•°æ®å­˜å‚¨å±‚"
        SUPABASE[(Supabaseæ•°æ®åº“)]
        VECTORS[(audit_vectorsè¡¨\nå‘é‡å­˜å‚¨)]
        SEARCH["å‘é‡ç›¸ä¼¼åº¦æœç´¢\nmatch_documents()"]
    end
    
    %% å¤–éƒ¨æœåŠ¡
    subgraph "å¤–éƒ¨æœåŠ¡"
        ETHERSCAN[Etherscan API<br/>åˆçº¦æºç è·å–]
        GITHUB[GitHub<br/>ä»£ç ä»“åº“]
    end
    
    %% æ•°æ®æµè¿æ¥
    UI --> API
    CLI --> API
    
    API --> HEALTH
    API --> ANALYZE
    API --> INGEST
    API --> ASK
    
    %% åˆ†ææµç¨‹
    ANALYZE --> SLITHER
    ANALYZE --> ECHIDNA
    ANALYZE --> ETHERSCAN
    
    SLITHER --> PARSER
    ECHIDNA --> PARSER
    
    %% æ•°æ®å¤„ç†æµç¨‹
    PARSER --> EMBED
    INGEST --> EMBED
    EMBED --> GEMINI
    EMBED --> VECTORS
    
    %% é—®ç­”æµç¨‹
    ASK --> EMBED
    ASK --> SEARCH
    SEARCH --> VECTORS
    VECTORS --> GEN
    GEN --> GEMINI
    
    %% å­˜å‚¨è¿æ¥
    VECTORS --> SUPABASE
    SEARCH --> SUPABASE
    
    %% æ ·å¼å®šä¹‰
    classDef userLayer fill:#e1f5fe
    classDef apiLayer fill:#f3e5f5
    classDef analysisLayer fill:#fff3e0
    classDef aiLayer fill:#e8f5e8
    classDef dataLayer fill:#fce4ec
    classDef externalLayer fill:#f1f8e9
    
    class UI,CLI userLayer
    class API,HEALTH,ANALYZE,INGEST,ASK apiLayer
    class SLITHER,ECHIDNA,PARSER analysisLayer
    class GEMINI,EMBED,GEN aiLayer
    class SUPABASE,VECTORS,SEARCH dataLayer
    class ETHERSCAN,GITHUB externalLayer
```

### æ ¸å¿ƒæŠ€æœ¯ç»„ä»¶

#### åç«¯æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**: FastAPI - ç°ä»£ã€å¿«é€Ÿçš„Python Webæ¡†æ¶
- **AIæœåŠ¡**: Google Gemini AI (embedding-001, gemini-pro)
- **æ•°æ®åº“**: Supabase (PostgreSQL + pgvector)
- **åˆ†æå·¥å…·**: Slither v0.9.3, Echidna
- **å‘é‡å­˜å‚¨**: 768ç»´å‘é‡åµŒå…¥
- **å¤–éƒ¨API**: Etherscan API
- **æµ‹è¯•æ¡†æ¶**: pytest

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js 14 - Reactå…¨æ ˆæ¡†æ¶
- **è¯­è¨€**: TypeScript - ç±»å‹å®‰å…¨çš„JavaScript
- **æ ·å¼**: Tailwind CSS - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- **ç»„ä»¶åº“**: Shadcn/ui - ç°ä»£åŒ–UIç»„ä»¶åº“
- **å›¾æ ‡**: Lucide React - ç²¾ç¾çš„å›¾æ ‡åº“
- **çŠ¶æ€ç®¡ç†**: React Hooks - ç°ä»£åŒ–çŠ¶æ€ç®¡ç†

#### å¼€å‘å·¥å…·
- **å®¹å™¨åŒ–**: Docker & Docker Compose
- **ä¾èµ–ç®¡ç†**: Poetry (Python), npm (Node.js)
- **ä»£ç è´¨é‡**: ESLint, Prettier
- **ç‰ˆæœ¬æ§åˆ¶**: Git

## ğŸ”‘ æ ¸å¿ƒç‰¹æ€§

### RAGæ¶æ„ä¼˜åŠ¿
- **æ£€ç´¢å¢å¼ºç”Ÿæˆ**: ç»“åˆå‘é‡æ£€ç´¢å’ŒAIç”Ÿæˆï¼Œæä¾›å‡†ç¡®çš„æ™ºèƒ½åˆçº¦å®¡è®¡é—®ç­”
- **è¯­ä¹‰æœç´¢**: åŸºäº768ç»´å‘é‡çš„è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: æ ¹æ®æ£€ç´¢åˆ°çš„ç›¸å…³å®¡è®¡æŠ¥å‘Šç”Ÿæˆé’ˆå¯¹æ€§å›ç­”

### å¤šå·¥å…·é›†æˆ
- **Slitheré™æ€åˆ†æ**: æ£€æµ‹å¸¸è§çš„æ™ºèƒ½åˆçº¦å®‰å…¨æ¼æ´
- **Echidnaæ¨¡ç³Šæµ‹è¯•**: åŸºäºå±æ€§çš„è‡ªåŠ¨åŒ–æµ‹è¯•
- **åŒé‡éªŒè¯**: é™æ€åˆ†æå’ŒåŠ¨æ€æµ‹è¯•ç›¸ç»“åˆ

### å®¹é”™ä¸æ€§èƒ½
- **é‡è¯•æœºåˆ¶**: é’ˆå¯¹AI APIè¶…æ—¶çš„æŒ‡æ•°é€€é¿é‡è¯•
- **å¤‡ç”¨æ–¹æ¡ˆ**: é›¶å‘é‡å¤‡ç”¨ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- **å¹¶å‘å¤„ç†**: æ”¯æŒæ‰¹é‡æ•°æ®å¤„ç†å’Œå¹¶å‘è¯·æ±‚

### æ•°æ®å¤„ç†èƒ½åŠ›
- **å¤šæ ¼å¼æ”¯æŒ**: Solidityæºç ã€JSONæŠ¥å‘Šã€åˆçº¦åœ°å€
- **æ‰¹é‡å¤„ç†**: æ”¯æŒå¤§è§„æ¨¡å®¡è®¡æŠ¥å‘Šçš„æ‰¹é‡ä¸Šä¼ å’Œå¤„ç†
- **å¢é‡æ›´æ–°**: æ”¯æŒå®¡è®¡æ•°æ®çš„å¢é‡æ·»åŠ å’Œæ›´æ–°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Node.js**: 18.0+ (æ¨èä½¿ç”¨LTSç‰ˆæœ¬)
- **Python**: 3.8+
- **PostgreSQL**: 12+ (æˆ–ä½¿ç”¨Supabase)
- **Docker**: 20.0+ (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd rag-audit-api
```

#### 2. ç¯å¢ƒé…ç½®
```bash
# åç«¯ç¯å¢ƒå˜é‡
cd backend
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å˜é‡ï¼š
# SUPABASE_URL="your-supabase-url"
# SUPABASE_KEY="your-supabase-key"
# GOOGLE_API_KEY="your-google-api-key"
# ETHERSCAN_API_KEY="your-etherscan-key"  # å¯é€‰
```

#### 3. åç«¯è®¾ç½®
```bash
# å®‰è£…Poetry (å¦‚æœæœªå®‰è£…)
curl -sSL https://install.python-poetry.org | python3 -

# å®‰è£…ä¾èµ–
poetry install

# è¿è¡Œæ•°æ®åº“è¿ç§» (å¦‚æœéœ€è¦)
poetry run alembic upgrade head

# å¯åŠ¨åç«¯æœåŠ¡
poetry run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### 4. å‰ç«¯è®¾ç½®
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

#### 5. è®¿é—®åº”ç”¨
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Docker Compose (æ¨è)
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### å•ç‹¬æ„å»º
```bash
# æ„å»ºåç«¯é•œåƒ
docker build -t smart-contract-analyzer-backend ./backend

# æ„å»ºå‰ç«¯é•œåƒ
docker build -t smart-contract-analyzer-frontend ./frontend

# è¿è¡Œåç«¯
docker run -p 8000:8000 --env-file backend/.env smart-contract-analyzer-backend

# è¿è¡Œå‰ç«¯
docker run -p 3000:3000 smart-contract-analyzer-frontend
```

## ğŸ“¡ APIæ¥å£

### ä¸»è¦ç«¯ç‚¹

#### æ™ºèƒ½åˆçº¦åˆ†æ
| æ¥å£ | æ–¹æ³• | æè¿° | å‚æ•° |
|------|------|------|------|
| `/api/v1/analyze` | POST | åˆ†ææ™ºèƒ½åˆçº¦ | files, contract_name |
| `/api/v1/analyze/{analysis_id}` | GET | è·å–åˆ†æç»“æœ | analysis_id |
| `/api/v1/analyze/history` | GET | è·å–åˆ†æå†å² | page, limit |

#### AIé—®ç­”
| æ¥å£ | æ–¹æ³• | æè¿° | å‚æ•° |
|------|------|------|------|
| `/api/v1/chat` | POST | å‘é€é—®ç­”è¯·æ±‚ | question, top_k |
| `/api/v1/chat/history` | GET | è·å–å¯¹è¯å†å² | page, limit |

#### æŠ¥å‘Šç®¡ç†
| æ¥å£ | æ–¹æ³• | æè¿° | å‚æ•° |
|------|------|------|------|
| `/api/v1/reports/upload` | POST | ä¸Šä¼ æŠ¥å‘Š | files |
| `/api/v1/reports` | GET | è·å–æŠ¥å‘Šåˆ—è¡¨ | page, limit |
| `/api/v1/reports/{report_id}` | DELETE | åˆ é™¤æŠ¥å‘Š | report_id |

#### ç³»ç»Ÿæ¥å£
| æ¥å£ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/docs` | GET | APIæ–‡æ¡£ |

è¯¦ç»†çš„APIæ–‡æ¡£è¯·è®¿é—®: http://localhost:8000/docs

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå†’çƒŸæµ‹è¯•ï¼ˆå¿«é€ŸéªŒè¯ï¼‰
python run_tests_unified.py smoke

# è¿è¡Œå®Œæ•´æµ‹è¯•
python run_tests_unified.py all

# ä½¿ç”¨pytest
pytest tests/test_pytest.py -v
```

è¯¦ç»†æµ‹è¯•è¯´æ˜è¯·å‚è€ƒ [TEST_README.md](TEST_README.md)

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# åç«¯é…ç½® (backend/.env)
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
GOOGLE_API_KEY=your_google_api_key
ETHERSCAN_API_KEY=your_etherscan_key
SECRET_KEY=your_secret_key
DEBUG=false
CORS_ORIGINS=["http://localhost:3000"]

# å‰ç«¯é…ç½® (frontend/.env.local)
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_NAME=æ™ºèƒ½åˆçº¦å®‰å…¨åˆ†æå¹³å°
```

### æ•°æ®åº“é…ç½®
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE smart_contract_db;

-- å¯ç”¨pgvectoræ‰©å±• (å¦‚æœä½¿ç”¨PostgreSQL)
CREATE EXTENSION IF NOT EXISTS vector;

-- åˆ›å»ºaudit_vectorsè¡¨
CREATE TABLE audit_vectors (
  id SERIAL PRIMARY KEY,
  content TEXT NOT NULL,
  embedding VECTOR(768),
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### Webç•Œé¢ä½¿ç”¨
1. **æ™ºèƒ½åˆçº¦åˆ†æ**
   - è®¿é—® http://localhost:3000/analyze
   - ä¸Šä¼ .solæ–‡ä»¶æˆ–è¾“å…¥åˆçº¦åœ°å€
   - æŸ¥çœ‹è¯¦ç»†çš„å®‰å…¨åˆ†ææŠ¥å‘Š

2. **AIæ™ºèƒ½é—®ç­”**
   - è®¿é—® http://localhost:3000/chat
   - è¾“å…¥æ™ºèƒ½åˆçº¦å®‰å…¨ç›¸å…³é—®é¢˜
   - è·å¾—åŸºäºRAGçš„ä¸“ä¸šè§£ç­”

3. **æ‰¹é‡æŠ¥å‘Šç®¡ç†**
   - è®¿é—® http://localhost:3000/batch-upload
   - æ‰¹é‡ä¸Šä¼ åˆ†ææŠ¥å‘Š
   - æŸ¥çœ‹ç»Ÿè®¡æ•°æ®å’ŒæŠ¥å‘Šé¢„è§ˆ

4. **åˆ†æå†å²**
   - è®¿é—® http://localhost:3000/history
   - æŸ¥çœ‹æ‰€æœ‰åˆ†æå†å²è®°å½•
   - å¯¼å‡ºå’Œç®¡ç†åˆ†ææ•°æ®

### APIä½¿ç”¨ç¤ºä¾‹

#### æ™ºèƒ½åˆçº¦åˆ†æ
```bash
curl -X POST "http://localhost:8000/api/v1/analyze" \
  -F "files=@contract.sol" \
  -F "contract_name=MyContract"
```

#### RAGæ™ºèƒ½é—®ç­”
```bash
curl -X POST "http://localhost:8000/api/v1/chat" \
  -H "Content-Type: application/json" \
  -d '{
    "question": "ä»€ä¹ˆæ˜¯é‡å…¥æ”»å‡»ï¼Ÿå¦‚ä½•é˜²èŒƒï¼Ÿ",
    "top_k": 5
  }'
```

#### æ‰¹é‡ä¸Šä¼ å®¡è®¡æŠ¥å‘Š
```bash
curl -X POST "http://localhost:8000/api/v1/reports/upload" \
  -F "files=@slither_report.json" \
  -F "files=@echidna_report.json"
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
rag-audit-api/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ v1/         # APIç‰ˆæœ¬1
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydanticæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ main.py         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ alembic/            # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ pyproject.toml      # Pythonä¾èµ–é…ç½®
â”‚   â””â”€â”€ Dockerfile          # åç«¯Dockeré…ç½®
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/                # Next.jsåº”ç”¨è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ analyze/        # æ™ºèƒ½åˆçº¦åˆ†æé¡µé¢
â”‚   â”‚   â”œâ”€â”€ chat/           # AIé—®ç­”é¡µé¢
â”‚   â”‚   â”œâ”€â”€ history/        # åˆ†æå†å²é¡µé¢
â”‚   â”‚   â”œâ”€â”€ batch-upload/   # æ‰¹é‡ä¸Šä¼ é¡µé¢
â”‚   â”‚   â””â”€â”€ layout.tsx      # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/             # UIåŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ navigation/     # å¯¼èˆªç»„ä»¶
â”‚   â”œâ”€â”€ lib/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json        # Node.jsä¾èµ–
â”‚   â””â”€â”€ Dockerfile          # å‰ç«¯Dockeré…ç½®
â”œâ”€â”€ docker-compose.yml      # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•
```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
poetry run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
poetry run pytest tests/test_api.py -v

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
poetry run pytest --cov=app tests/

# è¿è¡Œå†’çƒŸæµ‹è¯•ï¼ˆå¿«é€ŸéªŒè¯ï¼‰
python run_tests_unified.py smoke

# è¿è¡Œå®Œæ•´æµ‹è¯•
python run_tests_unified.py all
```

### å‰ç«¯æµ‹è¯•
```bash
cd frontend

# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e

# è¿è¡Œç±»å‹æ£€æŸ¥
npm run type-check

# è¿è¡Œä»£ç æ£€æŸ¥
npm run lint
```

è¯¦ç»†æµ‹è¯•è¯´æ˜è¯·å‚è€ƒ [TEST_README.md](TEST_README.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### Node.jsç‰ˆæœ¬é—®é¢˜
å¦‚æœé‡åˆ°"Unexpected token '?'"æˆ–ç±»ä¼¼çš„è¯­æ³•é”™è¯¯ï¼š
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# å¦‚æœç‰ˆæœ¬ä½äº18ï¼Œè¯·å‡çº§
# ä½¿ç”¨nvmå‡çº§ (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 18
nvm use 18

# æˆ–ç›´æ¥ä¸‹è½½å®‰è£…
# è®¿é—® https://nodejs.org/ ä¸‹è½½LTSç‰ˆæœ¬
```

#### æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥PostgreSQLçŠ¶æ€
sudo systemctl status postgresql

# æµ‹è¯•æ•°æ®åº“è¿æ¥
psql -h localhost -U username -d database_name

# æ£€æŸ¥Supabaseè¿æ¥
curl -H "apikey: YOUR_SUPABASE_KEY" "YOUR_SUPABASE_URL/rest/v1/"
```

#### ç«¯å£å†²çªé—®é¢˜
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000  # å‰ç«¯ç«¯å£
lsof -i :8000  # åç«¯ç«¯å£

# ä¿®æ”¹ç«¯å£
# åç«¯
uvicorn app.main:app --port 8001

# å‰ç«¯
npm run dev -- --port 3001
```

#### ä¾èµ–å®‰è£…é—®é¢˜
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
# Python
poetry cache clear --all pypi
poetry install

# Node.js
rm -rf node_modules package-lock.json
npm install
```

## ğŸ“ˆ è·¯çº¿å›¾

### å·²å®Œæˆ âœ…
- [x] åŸºç¡€RAGæ¶æ„å’ŒAPIæœåŠ¡
- [x] Slitherå’ŒEchidnaé›†æˆ
- [x] ç°ä»£åŒ–Webå‰ç«¯ç•Œé¢
- [x] AIæ™ºèƒ½é—®ç­”åŠŸèƒ½
- [x] æ‰¹é‡æŠ¥å‘Šç®¡ç†
- [x] Dockerå®¹å™¨åŒ–éƒ¨ç½²

### è¿›è¡Œä¸­ ğŸš§
- [ ] ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- [ ] æ›´å¤šæ•°æ®å¯è§†åŒ–å›¾è¡¨
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜æœºåˆ¶

### è®¡åˆ’ä¸­ ğŸ“‹
- [ ] æ”¯æŒæ›´å¤šé™æ€åˆ†æå·¥å…· (MythX, Securify)
- [ ] å¢åŠ æ™ºèƒ½åˆçº¦å½¢å¼åŒ–éªŒè¯
- [ ] æ”¯æŒå¤šé“¾æ™ºèƒ½åˆçº¦åˆ†æ (Ethereum, BSC, Polygon)
- [ ] é›†æˆæ›´å¤šAIæ¨¡å‹é€‰æ‹© (Claude, GPT-4)
- [ ] ç§»åŠ¨ç«¯åº”ç”¨å¼€å‘
- [ ] ä¼ä¸šçº§éƒ¨ç½²æ–¹æ¡ˆ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼
1. **æŠ¥å‘Šé—®é¢˜**: åœ¨ [Issues](https://github.com/your-repo/issues) ä¸­æŠ¥å‘Šbugæˆ–æå‡ºåŠŸèƒ½è¯·æ±‚
2. **æäº¤ä»£ç **: Forké¡¹ç›®ï¼Œåˆ›å»ºåˆ†æ”¯ï¼Œæäº¤Pull Request
3. **æ”¹è¿›æ–‡æ¡£**: å¸®åŠ©å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹
4. **åˆ†äº«ç»éªŒ**: åœ¨ç¤¾åŒºä¸­åˆ†äº«ä½¿ç”¨ç»éªŒå’Œæœ€ä½³å®è·µ

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®åˆ°ä½ çš„GitHubè´¦æˆ·
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- **Python**: éµå¾ªPEP 8è§„èŒƒï¼Œä½¿ç”¨blackæ ¼å¼åŒ–
- **TypeScript**: ä½¿ç”¨ESLintå’ŒPrettier
- **æäº¤ä¿¡æ¯**: ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯æè¿°æ›´æ”¹

## ğŸ“ æ”¯æŒä¸è”ç³»

### è·å–å¸®åŠ©
- ğŸ“– **æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›®Wikiè·å–è¯¦ç»†æ–‡æ¡£
- ğŸ› **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-repo/issues)
- ğŸ’¬ **è®¨è®º**: [GitHub Discussions](https://github.com/your-repo/discussions)
- ğŸ“§ **é‚®ä»¶**: support@example.com

### ç¤¾åŒº
- ğŸŒŸ **ç»™é¡¹ç›®ç‚¹æ˜Ÿ**: å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼
- ğŸ”„ **åˆ†äº«é¡¹ç›®**: å¸®åŠ©æ›´å¤šäººäº†è§£è¿™ä¸ªé¡¹ç›®
- ğŸ¤ **å‚ä¸è´¡çŒ®**: åŠ å…¥æˆ‘ä»¬çš„å¼€å‘è€…ç¤¾åŒº

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

```
MIT License

Copyright (c) 2024 Smart Contract Security Analysis Platform

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’ŒæœåŠ¡æä¾›å•†ï¼š

### æ ¸å¿ƒæŠ€æœ¯
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£Python Webæ¡†æ¶
- [Next.js](https://nextjs.org/) - Reactå…¨æ ˆæ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶
- [Shadcn/ui](https://ui.shadcn.com/) - ç°ä»£åŒ–UIç»„ä»¶åº“

### å®‰å…¨åˆ†æå·¥å…·
- [Slither](https://github.com/crytic/slither) - æ™ºèƒ½åˆçº¦é™æ€åˆ†æå·¥å…·
- [Echidna](https://github.com/crytic/echidna) - æ™ºèƒ½åˆçº¦æ¨¡ç³Šæµ‹è¯•å·¥å…·
- [Mythril](https://github.com/ConsenSys/mythril) - æ™ºèƒ½åˆçº¦å®‰å…¨åˆ†æå·¥å…·

### AIå’Œæ•°æ®æœåŠ¡
- [Google Gemini AI](https://ai.google.dev/) - AIæœåŠ¡æ”¯æŒ
- [Supabase](https://supabase.com/) - æ•°æ®åº“å’Œå‘é‡å­˜å‚¨
- [OpenAI](https://openai.com/) - AIæ¨¡å‹å’ŒAPI

### å¼€å‘å·¥å…·
- [Docker](https://www.docker.com/) - å®¹å™¨åŒ–å¹³å°
- [Poetry](https://python-poetry.org/) - Pythonä¾èµ–ç®¡ç†
- [TypeScript](https://www.typescriptlang.org/) - ç±»å‹å®‰å…¨çš„JavaScript

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼ â­**

[ğŸ  é¦–é¡µ](http://localhost:3000) | [ğŸ“– æ–‡æ¡£](http://localhost:8000/docs) | [ğŸ› é—®é¢˜åé¦ˆ](https://github.com/your-repo/issues) | [ğŸ’¬ è®¨è®º](https://github.com/your-repo/discussions)

</div>
